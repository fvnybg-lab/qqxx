# Quantumult X 随机UA 正确配置（修复语法错误，直接使用）
script-local = rewrite_fun_local("random_ua", function(req, res) {
    // 1. 多端UA池（PC/安卓/iOS/平板，可按需增删）
    const uaList = [
        // PC端 - Chrome/Edge/Firefox
        "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/129.0.0.0 Safari/537.36",
        "Mozilla/5.0 (Macintosh; Intel Mac OS X 14_6) AppleWebKit/537.36 (KHTML, like Gecko) Edge/128.0.0.0 Safari/537.36",
        "Mozilla/5.0 (Windows NT 11.0; Win64; x64; rv:130.0) Gecko/20100101 Firefox/130.0",
        // 移动端 - 安卓Chrome/iOS Safari
        "Mozilla/5.0 (Linux; Android 14; SM-S908B) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/129.0.0.0 Mobile Safari/537.36",
        "Mozilla/5.0 (iPhone; CPU iPhone OS 17_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.5 Mobile/15E148 Safari/604.1",
        // 平板端 - iPad Safari/安卓平板Chrome
        "Mozilla/5.0 (iPad; CPU OS 17_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.5 Mobile/15E148 Safari/604.1",
        "Mozilla/5.0 (Linux; Android 14; SM-X810) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/129.0.0.0 Safari/537.36"
    ];

    // 2. 随机获取UA（核心逻辑不变）
    const randomIndex = Math.floor(Math.random() * uaList.length);
    const randomUA = uaList[randomIndex];

    // 3. 替换UA（兼容大小写请求头，避免漏替换）
    req.headers["User-Agent"] = randomUA;
    req.headers["user-agent"] = randomUA;

    // 调试日志（控制台可查看，可选保留）
    console.log(`[随机UA] 已替换：${randomUA}`);

    return req;
})
